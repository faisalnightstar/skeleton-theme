<!-- CarKit Verified Products Section -->
<section style="background: {{ section.settings.section_bg }}; border-top: 1px solid {{ section.settings.section_border }}; border-bottom: 1px solid {{ section.settings.section_border }}; padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;">
  <div style="max-width: 1280px; margin: 0 auto; padding: 0 24px;">

    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 40px; flex-wrap: wrap; gap: 16px;">
      <div>
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
          <span class="material-symbols-outlined" style="font-size: 20px; color: {{ section.settings.accent_color }};">verified_user</span>
          <span style="font-size: 12px; font-weight: 700; letter-spacing: 0.05em; color: {{ section.settings.accent_color }}; text-transform: uppercase;">{{ section.settings.certified_label }}</span>
        </div>
        <h2 style="font-size: {{ section.settings.heading_size }}px; font-weight: 900; color: {{ section.settings.heading_color }}; letter-spacing: -0.025em; margin-bottom: 8px;">{{ section.settings.heading }}</h2>
        {% if section.settings.subtext != blank %}
          <p style="font-size: 15px; color: {{ section.settings.subtext_color }}; max-width: 480px;">{{ section.settings.subtext }}</p>
        {% endif %}
      </div>
      {% if section.settings.show_view_all and section.settings.view_all_url != blank %}
        <a href="{{ section.settings.view_all_url }}" style="display: inline-flex; padding: 12px 24px; background: {{ section.settings.view_all_bg }}; color: {{ section.settings.view_all_color }}; font-size: 14px; font-weight: 600; border-radius: 10px; text-decoration: none;">
          {{ section.settings.view_all_text }}
        </a>
      {% endif %}
    </div>

    <div style="display: grid; grid-template-columns: repeat({{ section.settings.columns }}, 1fr); gap: {{ section.settings.gap }}px;">
      {% for block in section.blocks %}
        {% if block.type == 'product' %}
          {% assign prod = block.settings.product %}
          {% if prod != blank %}
            {% assign prod_title = prod.title %}
            {% assign prod_price = prod.price | money %}
            {% assign prod_url = prod.url %}
            {% assign prod_image = block.settings.image | default: prod.featured_image %}
          {% else %}
            {% assign prod_title = block.settings.title %}
            {% assign prod_price = block.settings.price %}
            {% assign prod_url = block.settings.url | default: '#' %}
            {% assign prod_image = block.settings.image %}
          {% endif %}
          <div {{ block.shopify_attributes }} style="background: {{ section.settings.card_bg }}; border: 1px solid {{ section.settings.card_border }}; border-radius: {{ section.settings.card_radius }}px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.05); transition: all 0.2s;">

            <div style="position: relative; aspect-ratio: 16/9; background: #f1f5f9; overflow: hidden;">
              {% if prod_image != blank %}
                <a href="{{ prod_url }}">
                  <img src="{{ prod_image | image_url: width: 800 }}" alt="{{ prod_title | escape }}" width="800" height="450" loading="lazy" style="width: 100%; height: 100%; object-fit: cover;">
                </a>
              {% else %}
                <a href="{{ prod_url }}" style="width: 100%; height: 100%; background: linear-gradient(135deg, #e2e8f0, #f1f5f9); display: flex; align-items: center; justify-content: center; text-decoration: none; color: #cbd5e1;">
                  <span class="material-symbols-outlined" style="font-size: 48px;">image</span>
                </a>
              {% endif %}

              <div style="position: absolute; top: 12px; left: 12px; display: flex; align-items: center; gap: 6px; padding: 6px 12px; background: rgba(17,20,24,0.85); backdrop-filter: blur(8px); border-radius: 8px;">
                <span class="material-symbols-outlined" style="font-size: 14px; color: {{ section.settings.accent_color }};">verified</span>
                <span style="font-size: 12px; font-weight: 600; color: #fff;">{{ section.settings.verified_badge_text }}</span>
              </div>
            </div>

            <div style="padding: 24px;">
              <h3 style="font-size: {{ section.settings.title_size }}px; font-weight: 700; color: {{ section.settings.title_color }}; margin-bottom: 14px;">{{ prod_title }}</h3>

              <ul style="list-style: none; padding: 0; margin: 0 0 16px;">
                {% if block.settings.bullet1 != blank %}
                  <li style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: {{ section.settings.bullet_color }}; margin-bottom: 8px;">
                    <div style="width: 5px; height: 5px; background: #cbd5e1; border-radius: 50%; flex-shrink: 0;"></div>
                    {{ block.settings.bullet1 }}
                  </li>
                {% endif %}
                {% if block.settings.bullet2 != blank %}
                  <li style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: {{ section.settings.bullet_color }}; margin-bottom: 8px;">
                    <div style="width: 5px; height: 5px; background: #cbd5e1; border-radius: 50%; flex-shrink: 0;"></div>
                    {{ block.settings.bullet2 }}
                  </li>
                {% endif %}
                {% if block.settings.bullet3 != blank %}
                  <li style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: {{ section.settings.bullet_color }};">
                    <div style="width: 5px; height: 5px; background: #cbd5e1; border-radius: 50%; flex-shrink: 0;"></div>
                    {{ block.settings.bullet3 }}
                  </li>
                {% endif %}
              </ul>

              <div style="border-top: 1px solid #f1f5f9; padding-top: 16px; display: flex; align-items: center; justify-content: space-between;">
                <span style="font-size: {{ section.settings.price_size }}px; font-weight: 700; color: {{ section.settings.price_color }};">{{ prod_price }}</span>
                <a href="{{ prod_url }}" style="display: inline-flex; align-items: center; gap: 4px; font-size: 14px; font-weight: 600; color: {{ section.settings.link_color }}; text-decoration: none;">
                  {{ section.settings.shop_now_text }}
                  <span class="material-symbols-outlined" style="font-size: 16px;">arrow_forward</span>
                </a>
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Verified Products",
  "settings": [
    { "type": "header", "content": "Section" },
    { "type": "color", "id": "section_bg", "label": "Background", "default": "#f8fafc" },
    { "type": "color", "id": "section_border", "label": "Border color", "default": "#e2e8f0" },
    { "type": "range", "id": "padding_top", "label": "Top padding", "min": 32, "max": 96, "step": 8, "default": 64, "unit": "px" },
    { "type": "range", "id": "padding_bottom", "label": "Bottom padding", "min": 32, "max": 96, "step": 8, "default": 64, "unit": "px" },
    { "type": "header", "content": "Header" },
    { "type": "text", "id": "certified_label", "label": "Certified label", "default": "CarKit Certified" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Verified by CarKit" },
    { "type": "textarea", "id": "subtext", "label": "Subtext", "default": "Premium parts tested for durability and perfect fitment." },
    { "type": "range", "id": "heading_size", "label": "Heading size", "min": 20, "max": 48, "step": 2, "default": 30, "unit": "px" },
    { "type": "color", "id": "heading_color", "label": "Heading color", "default": "#111418" },
    { "type": "color", "id": "subtext_color", "label": "Subtext color", "default": "#64748b" },
    { "type": "color", "id": "accent_color", "label": "Accent color", "default": "#0d7ff2" },
    { "type": "header", "content": "View All button" },
    { "type": "checkbox", "id": "show_view_all", "label": "Show View All button", "default": true },
    { "type": "text", "id": "view_all_text", "label": "Button text", "default": "View All Verified Parts" },
    { "type": "url", "id": "view_all_url", "label": "Button URL" },
    { "type": "color", "id": "view_all_bg", "label": "Button background", "default": "#0d7ff2" },
    { "type": "color", "id": "view_all_color", "label": "Button text color", "default": "#ffffff" },
    { "type": "header", "content": "Grid" },
    { "type": "range", "id": "columns", "label": "Columns", "min": 2, "max": 4, "step": 1, "default": 3 },
    { "type": "range", "id": "gap", "label": "Gap", "min": 12, "max": 32, "step": 4, "default": 20, "unit": "px" },
    { "type": "header", "content": "Cards" },
    { "type": "color", "id": "card_bg", "label": "Card background", "default": "#ffffff" },
    { "type": "color", "id": "card_border", "label": "Card border", "default": "#e2e8f0" },
    { "type": "range", "id": "card_radius", "label": "Card radius", "min": 0, "max": 24, "step": 2, "default": 16, "unit": "px" },
    { "type": "text", "id": "verified_badge_text", "label": "Verified badge text", "default": "Verified Fit" },
    { "type": "range", "id": "title_size", "label": "Title size", "min": 14, "max": 22, "step": 1, "default": 17, "unit": "px" },
    { "type": "color", "id": "title_color", "label": "Title color", "default": "#111418" },
    { "type": "color", "id": "bullet_color", "label": "Bullet text color", "default": "#64748b" },
    { "type": "range", "id": "price_size", "label": "Price size", "min": 16, "max": 24, "step": 2, "default": 20, "unit": "px" },
    { "type": "color", "id": "price_color", "label": "Price color", "default": "#111418" },
    { "type": "text", "id": "shop_now_text", "label": "Shop link text", "default": "Shop Now" },
    { "type": "color", "id": "link_color", "label": "Link color", "default": "#0d7ff2" }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Verified Product",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "product", "id": "product", "label": "Product", "info": "Optional: links to product" },
        { "type": "text", "id": "title", "label": "Title", "default": "Product Name" },
        { "type": "text", "id": "price", "label": "Price", "default": "$99.95" },
        { "type": "text", "id": "bullet1", "label": "Feature 1" },
        { "type": "text", "id": "bullet2", "label": "Feature 2" },
        { "type": "text", "id": "bullet3", "label": "Feature 3" },
        { "type": "url", "id": "url", "label": "Product URL" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Verified Products",
      "blocks": [
        { "type": "product", "settings": { "title": "Brembo Ceramic Brake Pads", "price": "$89.95", "bullet1": "Low-dust ceramic compound", "bullet2": "OE-spec fitment guaranteed", "bullet3": "Includes wear sensors" } },
        { "type": "product", "settings": { "title": "KW Coilover Suspension Kit", "price": "$1,249.00", "bullet1": "Height-adjustable damping", "bullet2": "Stainless steel construction", "bullet3": "TÃœV-approved components" } },
        { "type": "product", "settings": { "title": "Motul 8100 X-cess Gen2", "price": "$54.99", "bullet1": "Full synthetic 5W-40", "bullet2": "ACEA A3/B4 certified", "bullet3": "Extended drain interval" } }
      ]
    }
  ]
}
{% endschema %}
